(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,54191,e=>{e.v({addSubBtn:"styles-module__TuB0xq__addSubBtn",badgeHigh:"styles-module__TuB0xq__badgeHigh",badgeLow:"styles-module__TuB0xq__badgeLow",badgeMedium:"styles-module__TuB0xq__badgeMedium",badgePriority:"styles-module__TuB0xq__badgePriority",badgeUrgent:"styles-module__TuB0xq__badgeUrgent",btnCancel:"styles-module__TuB0xq__btnCancel",btnSave:"styles-module__TuB0xq__btnSave",closeBtn:"styles-module__TuB0xq__closeBtn",container:"styles-module__TuB0xq__container",createTaskBtn:"styles-module__TuB0xq__createTaskBtn",editActions:"styles-module__TuB0xq__editActions",emptyState:"styles-module__TuB0xq__emptyState",expandBtn:"styles-module__TuB0xq__expandBtn",fadeIn:"styles-module__TuB0xq__fadeIn",formActions:"styles-module__TuB0xq__formActions",formContainer:"styles-module__TuB0xq__formContainer",formHeader:"styles-module__TuB0xq__formHeader",formRow2:"styles-module__TuB0xq__formRow2",formTitle:"styles-module__TuB0xq__formTitle",guideLineH:"styles-module__TuB0xq__guideLineH",guideLineV:"styles-module__TuB0xq__guideLineV",header:"styles-module__TuB0xq__header",headerActions:"styles-module__TuB0xq__headerActions",headerContent:"styles-module__TuB0xq__headerContent",iconBtn:"styles-module__TuB0xq__iconBtn",iconBtnDelete:"styles-module__TuB0xq__iconBtnDelete",inputField:"styles-module__TuB0xq__inputField",inputGroup:"styles-module__TuB0xq__inputGroup",inputLabel:"styles-module__TuB0xq__inputLabel",inviteForm:"styles-module__TuB0xq__inviteForm",mainContent:"styles-module__TuB0xq__mainContent",memberBtn:"styles-module__TuB0xq__memberBtn",memberInfo:"styles-module__TuB0xq__memberInfo",memberList:"styles-module__TuB0xq__memberList",memberRoleBadge:"styles-module__TuB0xq__memberRoleBadge",memberRow:"styles-module__TuB0xq__memberRow",metaItem:"styles-module__TuB0xq__metaItem",modalBody:"styles-module__TuB0xq__modalBody",modalContainer:"styles-module__TuB0xq__modalContainer",modalFooter:"styles-module__TuB0xq__modalFooter",modalHeader:"styles-module__TuB0xq__modalHeader",modalOverlay:"styles-module__TuB0xq__modalOverlay",modalTitle:"styles-module__TuB0xq__modalTitle",projectStatus:"styles-module__TuB0xq__projectStatus",projectStatusLabel:"styles-module__TuB0xq__projectStatusLabel",projectStatusSelect:"styles-module__TuB0xq__projectStatusSelect",projectStatusSelectWrapper:"styles-module__TuB0xq__projectStatusSelectWrapper",projectTitle:"styles-module__TuB0xq__projectTitle",projectTitleWrapper:"styles-module__TuB0xq__projectTitleWrapper",roleAdmin:"styles-module__TuB0xq__roleAdmin",roleMember:"styles-module__TuB0xq__roleMember",rolePM:"styles-module__TuB0xq__rolePM",statusCompleted:"styles-module__TuB0xq__statusCompleted",statusDefault:"styles-module__TuB0xq__statusDefault",statusDone:"styles-module__TuB0xq__statusDone",statusProgress:"styles-module__TuB0xq__statusProgress",statusSelectDisabled:"styles-module__TuB0xq__statusSelectDisabled",statusSelectSmall:"styles-module__TuB0xq__statusSelectSmall",subTaskFormContainer:"styles-module__TuB0xq__subTaskFormContainer",tabActive:"styles-module__TuB0xq__tabActive",tabBtn:"styles-module__TuB0xq__tabBtn",tabContainer:"styles-module__TuB0xq__tabContainer",tabInactive:"styles-module__TuB0xq__tabInactive",taskCard:"styles-module__TuB0xq__taskCard",taskCardActive:"styles-module__TuB0xq__taskCardActive",taskCardDisabled:"styles-module__TuB0xq__taskCardDisabled",taskDesc:"styles-module__TuB0xq__taskDesc",taskHeader:"styles-module__TuB0xq__taskHeader",taskInfo:"styles-module__TuB0xq__taskInfo",taskLeft:"styles-module__TuB0xq__taskLeft",taskMeta:"styles-module__TuB0xq__taskMeta",taskRight:"styles-module__TuB0xq__taskRight",taskTitle:"styles-module__TuB0xq__taskTitle",taskTitleDone:"styles-module__TuB0xq__taskTitleDone",taskWrapper:"styles-module__TuB0xq__taskWrapper",taskWrapperChild:"styles-module__TuB0xq__taskWrapperChild",treeNode:"styles-module__TuB0xq__treeNode"})},18512,e=>{"use strict";var t=e.i(56135),a=e.i(91543),s=e.i(58129),l=e.i(96504),n=e.i(87402),r=e.i(88776),i=e.i(54361);function d({projectId:e,token:s}){let[l,n]=(0,a.useState)(null),[i,d]=(0,a.useState)(!0),o=async()=>{try{let t=await fetch(`/api/v1/projects/${e}/report`,{headers:{Authorization:`Bearer ${s}`}});t.ok&&n(await t.json())}catch(e){console.error(e)}finally{d(!1)}};return((0,a.useEffect)(()=>{o()},[e]),i)?(0,t.jsx)("div",{className:"p-8 text-center text-gray-500",children:"ƒêang t·∫£i b√°o c√°o..."}):(0,t.jsx)("div",{className:"mt-6 animate-fade-in",children:(0,t.jsxs)("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,t.jsx)("span",{className:"text-2xl",children:"üìä"}),(0,t.jsx)("h3",{className:"font-bold text-gray-900 text-lg",children:"Hi·ªáu su·∫•t th√†nh vi√™n"})]}),(0,t.jsx)("div",{className:"overflow-x-auto rounded-lg border border-gray-100",children:(0,t.jsxs)("table",{className:"min-w-full text-sm text-left",children:[(0,t.jsx)("thead",{className:"bg-gray-50 text-gray-500 font-semibold uppercase text-xs tracking-wider",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-4",children:"Th√†nh vi√™n"}),(0,t.jsx)("th",{className:"px-6 py-4 text-center",children:"T·ªïng vi·ªác"}),(0,t.jsx)("th",{className:"px-6 py-4 text-center text-green-700",children:"Ho√†n th√†nh"}),(0,t.jsx)("th",{className:"px-6 py-4 text-center text-red-600",children:"Tr·ªÖ h·∫°n"}),(0,t.jsx)("th",{className:"px-6 py-4 text-right w-1/3",children:"Ti·∫øn ƒë·ªô"})]})}),(0,t.jsxs)("tbody",{className:"divide-y divide-gray-100 bg-white",children:[l?.members.map(e=>{let a=parseInt(e.assigned_tasks),s=parseInt(e.done_tasks),l=a>0?Math.round(s/a*100):0;return(0,t.jsxs)("tr",{className:"hover:bg-indigo-50/30 transition-colors",children:[(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(r.default,{name:e.username,size:"sm"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium text-gray-900 block",children:e.username}),(0,t.jsx)("span",{className:"text-xs text-gray-400",children:e.email})]})]})}),(0,t.jsx)("td",{className:"px-6 py-4 text-center text-gray-600 font-medium bg-gray-50/50",children:a}),(0,t.jsx)("td",{className:"px-6 py-4 text-center text-green-600 font-bold",children:s}),(0,t.jsx)("td",{className:"px-6 py-4 text-center text-red-500 font-medium",children:e.overdue_tasks}),(0,t.jsx)("td",{className:"px-6 py-4 text-right",children:(0,t.jsxs)("div",{className:"flex items-center justify-end gap-3",children:[(0,t.jsxs)("span",{className:"text-xs font-bold text-gray-600 w-8",children:[l,"%"]}),(0,t.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2.5 overflow-hidden shadow-inner",children:(0,t.jsx)("div",{className:`h-full rounded-full transition-all duration-1000 shadow-sm ${100===l?"bg-green-500":l>75?"bg-indigo-500":l>25?"bg-blue-400":"bg-orange-400"}`,style:{width:`${l}%`}})})]})})]},e.user_id)}),l?.members.length===0&&(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:"5",className:"text-center py-12 text-gray-400",children:"Ch∆∞a c√≥ th√†nh vi√™n n√†o trong d·ª± √°n."})})]})]})})]})})}let o="/api/v1";function c({taskId:e,projectId:s,token:l,canEdit:r}){let[d,c]=(0,a.useState)([]),[u,m]=(0,a.useState)(!1),[h,x]=(0,a.useState)({isOpen:!1,fileId:null,fileName:""}),[p,f]=(0,a.useState)(!1),g=async()=>{try{let t=e?`taskId=${e}`:`projectId=${s}`,a=await fetch(`${o}/attachments?${t}`,{headers:{Authorization:`Bearer ${l}`}});a.ok&&c(await a.json())}catch(e){console.error(e)}};(0,a.useEffect)(()=>{g()},[e,s]);let _=async t=>{let a=t.target.files[0];if(!a)return;let r=new FormData;r.append("file",a),e&&r.append("taskId",e),s&&r.append("projectId",s),m(!0);try{(await fetch(`${o}/attachments`,{method:"POST",headers:{Authorization:`Bearer ${l}`},body:r})).ok?(n.default.success("Upload th√†nh c√¥ng"),g()):n.default.error("L·ªói upload")}catch(e){n.default.error("L·ªói k·∫øt n·ªëi")}finally{m(!1),t.target.value=null}},j=async()=>{if(h.fileId){f(!0);try{(await fetch(`${o}/attachments/${h.fileId}`,{method:"DELETE",headers:{Authorization:`Bearer ${l}`}})).ok?(c(e=>e.filter(e=>e.id!==h.fileId)),n.default.success("ƒê√£ x√≥a file"),x({isOpen:!1,fileId:null,fileName:""})):n.default.error("L·ªói khi x√≥a file")}catch(e){n.default.error("L·ªói k·∫øt n·ªëi")}finally{f(!1)}}};return(0,t.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-100",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,t.jsxs)("h5",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wider",children:["T·ªáp ƒë√≠nh k√®m (",d.length,")"]}),r&&(0,t.jsxs)("label",{className:"cursor-pointer text-[10px] bg-gray-100 hover:bg-gray-200 text-gray-600 px-2 py-1 rounded flex items-center gap-1 transition-colors",children:[(0,t.jsx)("span",{children:u?"...":"üìé Upload"}),(0,t.jsx)("input",{type:"file",className:"hidden",onChange:_,disabled:u})]})]}),(0,t.jsx)("div",{className:"grid grid-cols-2 gap-2",children:d.map(e=>{var a;return(0,t.jsxs)("div",{className:"relative group bg-gray-50 p-2 rounded border border-gray-200 flex items-center gap-2 hover:bg-white hover:shadow-sm transition-all",children:[(0,t.jsx)("span",{className:"text-lg",children:(a=e.file_type).includes("image")?"üñºÔ∏è":a.includes("pdf")?"üìÑ":"üìé"}),(0,t.jsxs)("div",{className:"overflow-hidden flex-1",children:[(0,t.jsx)("a",{href:e.file_path,target:"_blank",rel:"noopener noreferrer",download:e.file_name,className:"text-xs text-indigo-600 font-medium hover:underline truncate block",title:e.file_name,children:e.file_name}),e.file_type.includes("image")&&(0,t.jsx)("div",{className:"mt-1 h-12 w-full relative rounded overflow-hidden bg-gray-200 border border-gray-100",children:(0,t.jsx)("img",{src:e.file_path,alt:"preview",className:"object-cover w-full h-full"})})]}),r&&(0,t.jsx)("button",{onClick:()=>{x({isOpen:!0,fileId:e.id,fileName:e.file_name})},className:"absolute top-1 right-1 bg-white rounded-full w-5 h-5 flex items-center justify-center text-red-500 shadow-sm border border-gray-200 opacity-0 group-hover:opacity-100 transition-all text-xs hover:bg-red-50 cursor-pointer",title:"X√≥a file",children:"√ó"})]},e.id)})}),(0,t.jsx)(i.default,{isOpen:h.isOpen,title:"X√≥a t·ªáp ƒë√≠nh k√®m?",message:`B·∫°n c\xf3 ch·∫Øc mu·ªën x\xf3a file "${h.fileName}" kh\xf4ng? H\xe0nh ƒë·ªông n\xe0y kh\xf4ng th·ªÉ ho\xe0n t\xe1c.`,onConfirm:j,onCancel:()=>x({isOpen:!1,fileId:null,fileName:""}),isLoading:p})]})}let u="/api/v1",m=({cmt:e,isMe:s,onDelete:l,onReply:n,userRole:i})=>{let[d,o]=(0,a.useState)(!1),c=e.content&&e.content.trim().length>0,u=c&&(e.content.length>150||e.content.split("\n").length>3);return(0,t.jsxs)("div",{className:`flex gap-2 ${s?"flex-row-reverse":""} animate-fade-in`,children:[(0,t.jsx)(r.default,{name:e.username,size:"sm"}),(0,t.jsx)("div",{className:`max-w-[85%] flex flex-col ${s?"items-end":"items-start"}`,children:(0,t.jsxs)("div",{className:`p-3 rounded-lg text-sm relative group shadow-sm ${s?"bg-indigo-50 text-indigo-900":"bg-gray-100 text-gray-800"}`,children:[e.parent_id&&(0,t.jsxs)("div",{className:"mb-2 pl-2 border-l-2 border-gray-300 text-xs text-gray-500 bg-white/50 p-1 rounded",children:[(0,t.jsxs)("span",{className:"font-bold mr-1",children:["@",e.parent_username,":"]}),(0,t.jsx)("span",{className:"italic line-clamp-1",children:e.parent_content||"[H√¨nh ·∫£nh]"})]}),(0,t.jsxs)("div",{className:`flex items-baseline justify-between gap-2 mb-1 ${s?"flex-row-reverse":""}`,children:[(0,t.jsx)("span",{className:"font-bold text-xs",children:e.username}),(0,t.jsx)("span",{className:"text-[10px] text-gray-400",children:new Date(e.created_at).toLocaleString("vi-VN",{hour:"2-digit",minute:"2-digit",day:"2-digit",month:"2-digit"})})]}),c&&(0,t.jsx)("div",{className:`whitespace-pre-wrap break-words leading-relaxed ${!d&&u?"line-clamp-3":""}`,children:e.content.split(" ").map((e,a)=>e.startsWith("@")?(0,t.jsxs)("span",{className:"text-blue-600 font-bold",children:[e," "]},a):e+" ")}),u&&(0,t.jsx)("button",{onClick:()=>o(!d),className:"text-[10px] font-bold text-indigo-600 hover:underline mt-1 block",children:d?"Thu g·ªçn":"Xem th√™m"}),e.image_url&&(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("a",{href:e.image_url,target:"_blank",rel:"noopener noreferrer",children:(0,t.jsx)("img",{src:e.image_url,alt:"comment attachment",className:"max-w-full h-auto max-h-60 rounded-md border border-gray-200 hover:opacity-90 transition-opacity cursor-zoom-in"})})}),(0,t.jsxs)("div",{className:`absolute top-1 ${s?"left-[-45px]":"right-[-45px]"} opacity-0 group-hover:opacity-100 transition-opacity flex gap-1`,children:[(0,t.jsx)("button",{onClick:()=>n(e),className:"bg-gray-200 hover:bg-gray-300 text-gray-600 w-5 h-5 rounded-full flex items-center justify-center text-[10px]",title:"Tr·∫£ l·ªùi",children:"‚Ü©"}),(s||"ADMIN"===i)&&(0,t.jsx)("button",{onClick:()=>l(e.id),className:"bg-red-100 hover:bg-red-200 text-red-600 w-5 h-5 rounded-full flex items-center justify-center text-[10px]",title:"X√≥a",children:"‚úï"})]})]})})]})};function h({taskId:e,token:l,members:d=[]}){let{user:o}=(0,s.useAuth)(),[c,h]=(0,a.useState)([]),[x,p]=(0,a.useState)(""),[f,g]=(0,a.useState)(!0),[_,j]=(0,a.useState)(null),[y,b]=(0,a.useState)(null),[v,N]=(0,a.useState)(null),[T,S]=(0,a.useState)(!1),[k,B]=(0,a.useState)(!1),w=(0,a.useRef)(null),[$,C]=(0,a.useState)({isOpen:!1,commentId:null}),q=async()=>{try{let t=await fetch(`${u}/tasks/${e}/comments`,{headers:{Authorization:`Bearer ${l}`}});t.ok&&h(await t.json())}catch(e){console.error(e)}finally{g(!1)}};(0,a.useEffect)(()=>{q()},[e]),(0,a.useEffect)(()=>{w.current&&(w.current.scrollTop=w.current.scrollHeight)},[c]);let D=()=>{j(null),b(null)},I=e=>{N(e),p(`@${e.username} `)},A=async t=>{if((t&&t.preventDefault(),!T)&&(x.trim()||_)){S(!0);try{let t=new FormData;t.append("content",x.trim()),v&&t.append("parentId",v.id),_&&t.append("file",_);let a=await fetch(`${u}/tasks/${e}/comments`,{method:"POST",headers:{Authorization:`Bearer ${l}`},body:t});if(a.ok){let e=await a.json();v&&(e.parent_username=v.username,e.parent_content=v.content),h(t=>[...t,e]),p(""),N(null),D()}else n.default.error("L·ªói g·ª≠i b√¨nh lu·∫≠n")}catch(e){n.default.error("L·ªói k·∫øt n·ªëi")}finally{S(!1)}}},O=async()=>{if($.commentId)try{await fetch(`${u}/tasks/0/comments/${$.commentId}`,{method:"DELETE",headers:{Authorization:`Bearer ${l}`}}),h(e=>e.filter(e=>e.id!==$.commentId)),n.default.success("ƒê√£ x√≥a"),C({isOpen:!1,commentId:null})}catch(e){n.default.error("L·ªói x√≥a")}};return f?(0,t.jsx)("div",{className:"text-xs text-gray-400 p-2",children:"ƒêang t·∫£i..."}):(0,t.jsxs)("div",{className:"mt-4 border-t border-gray-100 pt-4 relative",children:[(0,t.jsxs)("h4",{className:"text-xs font-bold text-gray-500 uppercase mb-3",children:["Th·∫£o lu·∫≠n (",c.length,")"]}),(0,t.jsxs)("div",{className:"max-h-80 overflow-y-auto space-y-4 mb-4 pr-2 custom-scrollbar",ref:w,children:[0===c.length&&(0,t.jsx)("p",{className:"text-xs text-gray-400 italic text-center py-4",children:"Ch∆∞a c√≥ b√¨nh lu·∫≠n n√†o."}),c.map(e=>(0,t.jsx)(m,{cmt:e,isMe:e.user_id===o?.id,onDelete:e=>C({isOpen:!0,commentId:e}),onReply:I,userRole:o?.role},e.id))]}),(v||y)&&(0,t.jsxs)("div",{className:"bg-gray-50 px-3 py-2 rounded-t-lg border border-gray-200 text-xs flex items-center justify-between gap-2 mb-[-1px] relative z-10 mx-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 overflow-hidden",children:[v&&(0,t.jsxs)("span",{className:"text-blue-600 truncate",children:["Tr·∫£ l·ªùi ",(0,t.jsx)("b",{children:v.username})]}),y&&(0,t.jsxs)("div",{className:"flex items-center gap-1 text-green-600 border-l pl-2 border-gray-300",children:[(0,t.jsx)("span",{className:"text-lg",children:"üñºÔ∏è"})," ",(0,t.jsx)("span",{children:"·∫¢nh ƒëang ch·ªçn..."}),(0,t.jsx)("img",{src:y,alt:"preview",className:"h-6 w-6 object-cover rounded border"})]})]}),(0,t.jsx)("button",{onClick:()=>{N(null),D(),p("")},disabled:T,className:"text-gray-400 hover:text-red-500 font-bold",children:"‚úï"})]}),k&&d&&(0,t.jsx)("div",{className:"absolute bottom-14 left-0 bg-white border border-gray-200 shadow-lg rounded-lg w-48 max-h-40 overflow-y-auto z-50",children:d.map(e=>(0,t.jsxs)("div",{onClick:()=>{var t;return t=e.username,void(p(e=>e+t+" "),B(!1))},className:"px-3 py-2 hover:bg-indigo-50 cursor-pointer flex items-center gap-2 text-xs",children:[(0,t.jsx)(r.default,{name:e.username,size:"sm"}),(0,t.jsx)("span",{children:e.username})]},e.id))}),(0,t.jsxs)("form",{onSubmit:A,className:`flex gap-2 items-end bg-white border border-gray-300 rounded-2xl px-3 py-2 focus-within:ring-2 focus-within:ring-indigo-500 ${v||y?"rounded-t-none border-t-0":""}`,children:[(0,t.jsxs)("label",{className:`text-gray-400 p-1.5 mb-0.5 transition-colors ${T?"cursor-not-allowed opacity-50":"hover:text-indigo-600 cursor-pointer"}`,title:"G·ª≠i ·∫£nh",children:[(0,t.jsx)("input",{type:"file",accept:"image/*",className:"hidden",onChange:e=>{let t=e.target.files[0];if(t){if(!t.type.startsWith("image/"))return n.default.error("Ch·ªâ ƒë∆∞·ª£c g·ª≠i ·∫£nh");j(t),b(URL.createObjectURL(t))}},disabled:T}),(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 15.75l5.159-5.159a2.25 2.25 0 013.182 0l5.159 5.159m-1.5-1.5l1.409-1.409a2.25 2.25 0 013.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 001.5-1.5V6a1.5 1.5 0 00-1.5-1.5H3.75A1.5 1.5 0 002.25 6v12a1.5 1.5 0 001.5 1.5zm10.5-11.25h.008v.008h-.008V8.25zm.375 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z"})})]}),(0,t.jsx)("textarea",{rows:1,className:"flex-1 text-sm outline-none resize-none bg-transparent custom-scrollbar max-h-24 py-1.5 disabled:bg-gray-50 disabled:text-gray-400",placeholder:T?"ƒêang g·ª≠i...":"Vi·∫øt b√¨nh lu·∫≠n... (@ ƒë·ªÉ tag)",value:x,onChange:e=>{let t=e.target.value;p(t),t.endsWith("@")?B(!0):t.endsWith(" ")&&B(!1)},onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||k||(e.preventDefault(),A())},disabled:T,style:{minHeight:"24px"}}),(0,t.jsx)("button",{type:"submit",disabled:!x.trim()&&!_||T,className:`text-white p-1.5 rounded-full mb-0.5 transition-colors shadow-sm ${T?"bg-gray-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50 disabled:bg-gray-400"}`,children:T?(0,t.jsxs)("svg",{className:"animate-spin w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-4 h-4",children:(0,t.jsx)("path",{d:"M3.478 2.405a.75.75 0 00-.926.94l2.432 7.905H13.5a.75.75 0 010 1.5H4.984l-2.432 7.905a.75.75 0 00.926.94 60.519 60.519 0 0018.445-8.986.75.75 0 000-1.218A60.517 60.517 0 003.478 2.405z"})})})]}),(0,t.jsx)(i.default,{isOpen:$.isOpen,title:"X√≥a b√¨nh lu·∫≠n?",message:"B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a b√¨nh lu·∫≠n n√†y kh√¥ng?",onConfirm:O,onCancel:()=>C({isOpen:!1,commentId:null})})]})}var x=e.i(54191);let p="/api/v1",f=e=>e?new Date(e).toLocaleDateString("vi-VN",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"",g=({onSubmit:e,onCancel:s,members:l,isSaving:n,autoFocus:r=!1,initialData:i=null,isSubForm:d=!1})=>{let[o,c]=(0,a.useState)({title:i?.title||"",description:i?.description||"",due_date:(e=>{if(!e)return"";let t=new Date(e),a=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),l=String(t.getDate()).padStart(2,"0"),n=String(t.getHours()).padStart(2,"0"),r=String(t.getMinutes()).padStart(2,"0");return`${a}-${s}-${l}T${n}:${r}`})(i?.due_date),priority:i?.priority||"MEDIUM",assignee_id:i?.assignee_id||""}),u=e=>c(t=>({...t,[e.target.name]:e.target.value}));return(0,t.jsxs)("form",{onSubmit:t=>{if(t.preventDefault(),!o.title.trim())return;let a={...o};i||(a.start_date=new Date().toISOString()),a.due_date&&(a.due_date=new Date(a.due_date).toISOString()),e(a)},className:d?x.default.subTaskFormContainer:x.default.formContainer,children:[(0,t.jsxs)("div",{className:x.default.formHeader,children:[(0,t.jsx)("h4",{className:x.default.formTitle,children:i?"Ch·ªânh s·ª≠a c√¥ng vi·ªác":"T·∫°o c√¥ng vi·ªác m·ªõi"}),i&&(0,t.jsxs)("span",{className:"text-[10px] text-gray-400",children:["Ng√†y t·∫°o: ",f(i.created_at)]})]}),(0,t.jsxs)("div",{className:x.default.inputGroup,children:[(0,t.jsxs)("label",{className:x.default.inputLabel,children:["T√™n c√¥ng vi·ªác ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{name:"title",autoFocus:r,required:!0,className:x.default.inputField,value:o.title,onChange:u,placeholder:"Nh·∫≠p t√™n c√¥ng vi·ªác..."})]}),(0,t.jsxs)("div",{className:x.default.inputGroup,children:[(0,t.jsx)("label",{className:x.default.inputLabel,children:"M√¥ t·∫£"}),(0,t.jsx)("textarea",{name:"description",rows:"2",className:x.default.inputField,value:o.description,onChange:u,placeholder:"M√¥ t·∫£ chi ti·∫øt..."})]}),(0,t.jsxs)("div",{className:x.default.formRow2,children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:x.default.inputLabel,children:"H·∫°n ch√≥t"}),(0,t.jsx)("input",{type:"datetime-local",name:"due_date",className:x.default.inputField,value:o.due_date,onChange:u})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:x.default.inputLabel,children:"∆Øu ti√™n"}),(0,t.jsxs)("select",{name:"priority",className:x.default.inputField,value:o.priority,onChange:u,children:[(0,t.jsx)("option",{value:"LOW",children:"Th·∫•p"}),(0,t.jsx)("option",{value:"MEDIUM",children:"Trung b√¨nh"}),(0,t.jsx)("option",{value:"HIGH",children:"Cao"}),(0,t.jsx)("option",{value:"URGENT",children:"Kh·∫©n c·∫•p"})]})]})]}),(0,t.jsxs)("div",{className:x.default.inputGroup,children:[(0,t.jsx)("label",{className:x.default.inputLabel,children:"Giao cho ai?"}),(0,t.jsxs)("select",{name:"assignee_id",className:x.default.inputField,value:o.assignee_id,onChange:u,children:[(0,t.jsx)("option",{value:"",children:"-- Ch∆∞a ph√¢n c√¥ng --"}),l.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.username," (",e.email,")"]},e.id))]})]}),(0,t.jsxs)("div",{className:x.default.formActions,children:[(0,t.jsx)("button",{type:"button",onClick:s,className:x.default.btnCancel,children:"H·ªßy"}),(0,t.jsx)("button",{type:"submit",disabled:n,className:x.default.btnSave,children:n?"L∆∞u...":"L∆∞u"})]})]})},_=({task:e,level:s=0,projectId:l,token:r,onRefresh:i,members:d,currentUser:o,onRequestDelete:u})=>{var m;let j,[y,b]=(0,a.useState)(!0),[v,N]=(0,a.useState)(!1),[T,S]=(0,a.useState)(!1),[k,B]=(0,a.useState)(!1),[w,$]=(0,a.useState)(!1),[C,q]=(0,a.useState)(!1),D=o?.role==="ADMIN"||o?.role==="PM"||e.assignee_id===o?.id,I=o?.role==="ADMIN"||o?.role==="PM",A=d.find(t=>t.id===e.assignee_id)?.username||"Ch∆∞a giao",O=async t=>{if(!D)return void n.default.error("B·∫°n kh√¥ng ƒë∆∞·ª£c ph√¢n c√¥ng c√¥ng vi·ªác n√†y!");$(!0);try{let a=await fetch(`${p}/projects/${l}/tasks/${e.id}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({status:t})}),s=await a.json();a.ok?(i(),n.default.success("ƒê√£ c·∫≠p nh·∫≠t tr·∫°ng th√°i")):n.default.error(s.message||"Kh√¥ng th·ªÉ c·∫≠p nh·∫≠t")}catch(e){n.default.error("L·ªói k·∫øt n·ªëi")}finally{$(!1)}},L=async t=>{B(!0);try{let a=await fetch(`${p}/projects/${l}/tasks/${e.id}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({...t,assignee_id:t.assignee_id||null})}),s=await a.json();a.ok?(S(!1),i(),n.default.success("ƒê√£ c·∫≠p nh·∫≠t c√¥ng vi·ªác")):n.default.error(s.message)}catch(e){n.default.error("L·ªói k·∫øt n·ªëi")}finally{B(!1)}},E=async t=>{B(!0);try{let a=await fetch(`${p}/projects/${l}/tasks`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({...t,parent_id:e.id,assignee_id:t.assignee_id||null})}),s=await a.json();a.ok?(N(!1),b(!0),i(),n.default.success("ƒê√£ th√™m con")):n.default.error(s.message)}catch(e){n.default.error("L·ªói k·∫øt n·ªëi")}finally{B(!1)}};return T?(0,t.jsx)("div",{className:`${x.default.taskWrapper} ${s>0?x.default.taskWrapperChild:""}`,children:(0,t.jsx)(g,{initialData:e,onSubmit:L,onCancel:()=>S(!1),members:d,isSaving:k,isSubForm:!0})}):(0,t.jsxs)("div",{className:x.default.treeNode,children:[s>0&&(0,t.jsx)("div",{className:x.default.guideLineV}),s>0&&(0,t.jsx)("div",{className:x.default.guideLineH}),(0,t.jsxs)("div",{className:`${x.default.taskWrapper} ${s>0?x.default.taskWrapperChild:""}`,children:[(0,t.jsxs)("div",{className:`${x.default.taskCard} group ${D?x.default.taskCardActive:x.default.taskCardDisabled}`,children:[(0,t.jsxs)("div",{className:x.default.taskLeft,children:[(0,t.jsx)("button",{onClick:()=>b(!y),className:`${x.default.expandBtn} ${!e.subTasks?.length?"invisible":""}`,children:(0,t.jsx)("span",{className:`text-xs transform transition-transform duration-200 ${y?"rotate-90":""}`,children:"‚ñ∂"})}),(0,t.jsxs)("div",{className:x.default.taskInfo,children:[(0,t.jsxs)("div",{className:x.default.taskHeader,children:[(0,t.jsx)("span",{className:`${x.default.taskTitle} ${"DONE"===e.status?x.default.taskTitleDone:""}`,children:e.title}),(0,t.jsx)("span",{className:`${x.default.badgePriority} ${"URGENT"===(m=e.priority)?x.default.badgeUrgent:"HIGH"===m?x.default.badgeHigh:"LOW"===m?x.default.badgeLow:x.default.badgeMedium}`,children:e.priority}),I&&(0,t.jsxs)("div",{className:x.default.editActions,children:[(0,t.jsx)("button",{onClick:()=>S(!0),className:x.default.iconBtn,title:"S·ª≠a",children:"‚úèÔ∏è"}),(0,t.jsx)("button",{onClick:()=>u("TASK",e.id,e.title),className:x.default.iconBtnDelete,title:"X√≥a",children:"üóëÔ∏è"})]})]}),e.description&&(0,t.jsx)("p",{className:x.default.taskDesc,children:e.description}),(0,t.jsxs)("div",{className:x.default.taskMeta,children:[(0,t.jsxs)("div",{className:x.default.metaItem,title:"Ng∆∞·ªùi th·ª±c hi·ªán",children:["üë§"," ",(0,t.jsx)("span",{className:"font-medium text-gray-700",children:A})]}),"DONE"===e.status&&e.completed_at?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-1 text-blue-600 bg-blue-50 px-1.5 rounded border border-blue-100",title:"Ho√†n th√†nh l√∫c",children:["üèÅ ",(0,t.jsx)("span",{children:f(e.completed_at)})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1 text-green-600 bg-green-50 px-1.5 rounded border border-green-100",title:"T·ªïng th·ªùi gian th·ª±c hi·ªán",children:["‚è±Ô∏è"," ",(0,t.jsx)("span",{children:((e,t)=>{if(!e||!t)return"";let a=new Date(e),s=new Date(t)-a;if(s<=0)return"V·ª´a xong";let l=Math.floor(s/1e3),n=Math.floor(l/86400),r=Math.floor(l%86400/3600),i=Math.floor(l%3600/60);return n>0?`${n} ng\xe0y ${r} gi·ªù`:r>0?`${r} gi·ªù ${i} ph\xfat`:`${i} ph\xfat ${l%60} gi\xe2y`})(e.created_at,e.completed_at)})]})]}):e.due_date&&(0,t.jsxs)("div",{className:`flex items-center gap-1 px-1.5 rounded ${new Date(e.due_date)<new Date?"text-red-600 bg-red-50":"text-orange-600 bg-orange-50"}`,title:"H·∫°n ch√≥t",children:["üìÖ ",f(e.due_date)]}),"DONE"!==e.status&&(0,t.jsxs)("div",{className:x.default.metaItem,title:"Ng√†y t·∫°o",children:["üïí"," ",(0,t.jsx)("span",{className:"text-gray-400",children:f(e.created_at)})]})]})]})]}),(0,t.jsxs)("div",{className:x.default.taskRight,children:[(0,t.jsx)("button",{onClick:()=>q(!C),className:`text-gray-400 hover:text-indigo-600 transition-colors p-1 ${C?"text-indigo-600":""}`,title:"B√¨nh lu·∫≠n",children:"üí¨"}),I&&(0,t.jsx)("button",{onClick:()=>N(!v),className:x.default.addSubBtn,children:"+ Con"}),(0,t.jsxs)("select",{value:e.status,onChange:e=>O(e.target.value),disabled:!D||w,className:(j=x.default.statusSelectSmall,D?(j+=" hover:bg-opacity-80 ","DONE"===e.status)?j+" "+x.default.statusDone:"IN_PROGRESS"===e.status?j+" "+x.default.statusProgress:j+" "+x.default.statusDefault:`${j} ${x.default.statusSelectDisabled}`),children:[(0,t.jsx)("option",{value:"TODO",children:"TODO"}),(0,t.jsx)("option",{value:"IN_PROGRESS",children:"IN PROGRESS"}),(0,t.jsx)("option",{value:"REVIEW",children:"REVIEW"}),(0,t.jsx)("option",{value:"DONE",children:"DONE"})]})]})]}),(0,t.jsxs)("div",{className:"ml-8 pl-4 border-l border-gray-100",children:[C&&(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsx)(h,{taskId:e.id,token:r,members:d})}),(0,t.jsx)(c,{taskId:e.id,token:r,canEdit:I||e.assignee_id===o?.id})]}),v&&(0,t.jsx)("div",{className:x.default.taskWrapperChild,children:(0,t.jsxs)("div",{className:"flex items-start gap-2",children:[(0,t.jsx)("span",{className:"text-gray-300 text-2xl leading-none mt-[-5px]",children:"‚Ü≥"}),(0,t.jsx)("div",{className:"flex-1",children:(0,t.jsx)(g,{onSubmit:E,onCancel:()=>N(!1),members:d,isSaving:k,isSubForm:!0})})]})}),y&&e.subTasks?.map(e=>(0,t.jsx)(_,{task:e,level:s+1,projectId:l,token:r,onRefresh:i,members:d,currentUser:o,onRequestDelete:u},e.id))]})]})};function j(){let e=(0,l.useSearchParams)().get("id"),{user:o,token:c}=(0,s.useAuth)(),[u,m]=(0,a.useState)(null),[h,f]=(0,a.useState)([]),[j,y]=(0,a.useState)([]),[b,v]=(0,a.useState)(!0),[N,T]=(0,a.useState)(!1),[S,k]=(0,a.useState)(!1),[B,w]=(0,a.useState)("TASKS"),[$,C]=(0,a.useState)(""),[q,D]=(0,a.useState)(""),[I,A]=(0,a.useState)(!1),[O,L]=(0,a.useState)(""),[E,M]=(0,a.useState)(!1),[R,H]=(0,a.useState)([]),[P,z]=(0,a.useState)({isOpen:!1,type:null,id:null,title:"",message:""}),[W,F]=(0,a.useState)(!1),G=async()=>{if(c&&e)try{let t=new URLSearchParams;$&&t.append("priority",$),q&&t.append("status",q);let a=t.toString()?`?${t.toString()}`:"",[s,l,n]=await Promise.all([fetch(`${p}/projects`,{headers:{Authorization:`Bearer ${c}`}}),fetch(`${p}/projects/${e}/tasks${a}`,{headers:{Authorization:`Bearer ${c}`}}),fetch(`${p}/projects/${e}/members`,{headers:{Authorization:`Bearer ${c}`}})]);if(s.ok){let t=await s.json();m(t.find(t=>t.id===parseInt(e)))}l.ok&&f(await l.json()),n.ok&&y(await n.json())}catch(e){console.error(e)}finally{v(!1)}};(0,a.useEffect)(()=>{c&&e&&G()},[c,e,$,q]);let U=async t=>{if(u){k(!0);try{let a=await fetch(`${p}/projects/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${c}`},body:JSON.stringify({status:t})}),s=await a.json();if(!a.ok)throw Error(s.message);m(e=>({...e,status:t})),n.default.success(`D·ª± \xe1n: ${t}`)}catch(e){n.default.error(e.message)}finally{k(!1)}}},K=async t=>{T(!0);try{await fetch(`${p}/projects/${e}/tasks`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${c}`},body:JSON.stringify({...t,assignee_id:t.assignee_id||null})}),T(!1),G(),n.default.success("ƒê√£ t·∫°o nh√≥m c√¥ng vi·ªác")}catch(e){n.default.error("L·ªói t·∫°o")}},V=async()=>{A(!0);try{let e=await fetch(`${p}/users?limit=100`,{headers:{Authorization:`Bearer ${c}`}});if(e.ok){let t=await e.json(),a=t.data||t,s=new Set(j.map(e=>e.id));H(a.filter(e=>!s.has(e.id)&&"ADMIN"!==e.role))}}catch(e){}},X=async t=>{if(t.preventDefault(),!O)return n.default.error("Vui l√≤ng ch·ªçn th√†nh vi√™n");M(!0);try{let t=await fetch(`${p}/projects/${e}/members`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${c}`},body:JSON.stringify({email:O})}),a=await t.json();t.ok?(n.default.success("ƒê√£ th√™m th√†nh vi√™n!"),L(""),G(),H(e=>e.filter(e=>e.email!==O))):n.default.error(a.message||"L·ªói m·ªùi")}catch(e){n.default.error("L·ªói k·∫øt n·ªëi")}finally{M(!1)}},J=(e,t,a)=>{z({isOpen:!0,type:e,id:t,title:`X\xf3a ${"TASK"===e?"c√¥ng vi·ªác":"th√†nh vi√™n"}?`,message:`B·∫°n c\xf3 ch·∫Øc mu·ªën x\xf3a ${a}?`})},Y=async()=>{F(!0);try{let t="TASK"===P.type?`${p}/projects/${e}/tasks/${P.id}`:`${p}/projects/${e}/members/${P.id}`;(await fetch(t,{method:"DELETE",headers:{Authorization:`Bearer ${c}`}})).ok?(n.default.success("ƒê√£ x√≥a"),G()):n.default.error("Kh√¥ng th·ªÉ x√≥a")}catch(e){n.default.error("L·ªói k·∫øt n·ªëi")}finally{F(!1),z({...P,isOpen:!1})}},Q=o?.role==="ADMIN"||o?.role==="PM"&&u?.created_by===o.id;return e?b?(0,t.jsx)("div",{className:"p-8 text-center",children:"ƒêang t·∫£i..."}):(0,t.jsxs)("div",{className:x.default.container,children:[(0,t.jsx)("header",{className:x.default.header,children:(0,t.jsxs)("div",{className:x.default.headerContent,children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:x.default.projectTitleWrapper,children:[(0,t.jsx)("h1",{className:x.default.projectTitle,children:u?.name||`D·ª± \xe1n #${e}`}),(0,t.jsx)("span",{className:`${x.default.projectStatus} ${u?.status==="COMPLETED"?x.default.statusCompleted:x.default.statusProgress}`,children:u?.status})]}),(0,t.jsx)("div",{className:"flex items-center gap-4 mt-2",children:(0,t.jsxs)("button",{onClick:V,className:x.default.memberBtn,children:["üë• ",j.length," Th√†nh vi√™n"]})})]}),(0,t.jsxs)("div",{className:x.default.headerActions,children:[o?.role==="ADMIN"||o?.role==="PM"&&u?.created_by===o?.id?(0,t.jsxs)("div",{className:x.default.projectStatusSelectWrapper,children:[(0,t.jsx)("span",{className:x.default.projectStatusLabel,children:"Tr·∫°ng th√°i:"}),(0,t.jsxs)("select",{value:u?.status||"IN_PROGRESS",onChange:e=>U(e.target.value),disabled:S,className:x.default.projectStatusSelect,children:[(0,t.jsx)("option",{value:"IN_PROGRESS",children:"ƒêang tri·ªÉn khai"}),(0,t.jsx)("option",{value:"COMPLETED",children:"ƒê√£ ho√†n th√†nh"})]})]}):null,(o?.role==="ADMIN"||o?.role==="PM")&&!N&&"TASKS"===B&&(0,t.jsxs)("button",{onClick:()=>T(!0),className:x.default.createTaskBtn,children:[(0,t.jsx)("span",{children:"+"})," Vi·ªác m·ªõi"]})]})]})}),(0,t.jsxs)("div",{className:x.default.tabContainer,children:[(0,t.jsx)("button",{onClick:()=>w("TASKS"),className:`${x.default.tabBtn} ${"TASKS"===B?x.default.tabActive:x.default.tabInactive}`,children:"Danh s√°ch c√¥ng vi·ªác"}),(0,t.jsx)("button",{onClick:()=>w("REPORT"),className:`${x.default.tabBtn} ${"REPORT"===B?x.default.tabActive:x.default.tabInactive}`,children:"B√°o c√°o ti·∫øn ƒë·ªô"})]}),(0,t.jsx)("main",{className:x.default.mainContent,children:"TASKS"===B?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsxs)("h3",{className:"font-bold text-gray-700",children:["C√¥ng vi·ªác (",h.length,")"]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-xs text-gray-500",children:"L·ªçc ∆∞u ti√™n:"}),(0,t.jsxs)("select",{className:"text-xs border border-gray-300 rounded px-2 py-1 outline-none focus:border-indigo-500 cursor-pointer",value:$,onChange:e=>C(e.target.value),children:[(0,t.jsx)("option",{value:"",children:"T·∫•t c·∫£"}),(0,t.jsx)("option",{value:"URGENT",children:"Kh·∫©n c·∫•p"}),(0,t.jsx)("option",{value:"HIGH",children:"Cao"}),(0,t.jsx)("option",{value:"MEDIUM",children:"Trung b√¨nh"}),(0,t.jsx)("option",{value:"LOW",children:"Th·∫•p"})]}),(0,t.jsx)("span",{className:"text-xs text-gray-500 ml-2",children:"Tr·∫°ng th√°i:"}),(0,t.jsxs)("select",{className:"text-xs border border-gray-300 rounded px-2 py-1 outline-none focus:border-indigo-500 cursor-pointer",value:q,onChange:e=>D(e.target.value),children:[(0,t.jsx)("option",{value:"",children:"T·∫•t c·∫£"}),(0,t.jsx)("option",{value:"TODO",children:"C·∫ßn l√†m"}),(0,t.jsx)("option",{value:"IN_PROGRESS",children:"ƒêang l√†m"}),(0,t.jsx)("option",{value:"REVIEW",children:"Review"}),(0,t.jsx)("option",{value:"DONE",children:"Ho√†n th√†nh"})]})]})]}),N&&(0,t.jsx)("div",{className:x.default.formContainer,children:(0,t.jsx)(g,{onSubmit:K,onCancel:()=>T(!1),members:j,isSaving:!1})}),(0,t.jsx)("div",{className:"space-y-4",children:h.length>0?h.map(a=>(0,t.jsx)(_,{task:a,projectId:e,token:c,onRefresh:G,members:j,currentUser:o,onRequestDelete:J},a.id)):!N&&(0,t.jsx)("div",{className:x.default.emptyState,children:(0,t.jsx)("p",{className:"text-gray-500",children:"Kh√¥ng t√¨m th·∫•y c√¥ng vi·ªác n√†o."})})})]}):(0,t.jsx)(d,{projectId:e,token:c})}),I&&(0,t.jsx)("div",{className:x.default.modalOverlay,children:(0,t.jsxs)("div",{className:x.default.modalContainer,children:[(0,t.jsxs)("div",{className:x.default.modalHeader,children:[(0,t.jsx)("h3",{className:x.default.modalTitle,children:"Th√†nh vi√™n d·ª± √°n"}),(0,t.jsx)("button",{onClick:()=>A(!1),className:x.default.closeBtn,children:"√ó"})]}),(0,t.jsxs)("div",{className:x.default.modalBody,children:[Q&&(0,t.jsxs)("form",{onSubmit:X,className:x.default.inviteForm,children:[(0,t.jsxs)("select",{className:x.default.inputField,value:O,onChange:e=>L(e.target.value),children:[(0,t.jsx)("option",{value:"",children:"-- Ch·ªçn nh√¢n vi√™n --"}),R.map(e=>(0,t.jsxs)("option",{value:e.email,children:[e.username," (",e.email,")"]},e.id)),0===R.length&&(0,t.jsx)("option",{disabled:!0,children:"H·∫øt nh√¢n vi√™n"})]}),(0,t.jsx)("button",{type:"submit",disabled:E||!O,className:x.default.btnSave,children:E?"...":"Th√™m"})]}),(0,t.jsx)("div",{className:x.default.memberList,children:j.map(e=>(0,t.jsxs)("div",{className:x.default.memberRow,children:[(0,t.jsxs)("div",{className:x.default.memberInfo,children:[(0,t.jsx)(r.default,{name:e.username,size:"md"}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("p",{className:"font-medium text-sm text-gray-900",children:e.username}),e.is_manager&&(0,t.jsx)("span",{className:"text-xs text-yellow-500",children:"‚≠ê"})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:e.email})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:`${x.default.memberRoleBadge} ${"ADMIN"===e.role?x.default.roleAdmin:"PM"===e.role?x.default.rolePM:x.default.roleMember}`,children:e.role}),Q&&e.id!==u?.created_by&&e.id!==o.id&&(0,t.jsx)("button",{onClick:()=>J("MEMBER",e.id,e.username),className:x.default.iconBtnDelete,children:"üóëÔ∏è"})]})]},e.id))})]}),(0,t.jsx)("div",{className:x.default.modalFooter,children:(0,t.jsx)("button",{onClick:()=>A(!1),className:x.default.btnCancel,children:"ƒê√≥ng"})})]})}),(0,t.jsx)(i.default,{isOpen:P.isOpen,title:P.title,message:P.message,onConfirm:Y,onCancel:()=>z({...P,isOpen:!1}),isLoading:W})]}):(0,t.jsx)("div",{className:"p-8",children:"D·ª± √°n kh√¥ng t·ªìn t·∫°i"})}function y(){return(0,t.jsx)(a.Suspense,{fallback:(0,t.jsx)("div",{className:"p-8 text-center",children:"ƒêang t·∫£i..."}),children:(0,t.jsx)(j,{})})}e.s(["default",()=>y],18512)}]);