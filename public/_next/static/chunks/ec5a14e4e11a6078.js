(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,54361,e=>{"use strict";var t=e.i(56135);function r({isOpen:e,title:r,message:a,onConfirm:s,onCancel:i,isLoading:n}){return e?(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50 animate-fade-in",children:(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md p-6 mx-4 transform transition-all scale-100",children:[(0,t.jsx)("div",{className:"flex items-center gap-3 text-red-600 mb-4",children:(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:r})}),(0,t.jsx)("p",{className:"text-gray-500 mb-6 text-sm leading-relaxed",children:a}),(0,t.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,t.jsx)("button",{onClick:i,disabled:n,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Há»§y bá»"}),(0,t.jsx)("button",{onClick:s,disabled:n,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-lg hover:bg-red-700 flex items-center gap-2",children:n?"Äang xá»­ lÃ½...":"XÃ³a ngay"})]})]})}):null}e.s(["default",()=>r])},34221,e=>{"use strict";var t=e.i(56135),r=e.i(91543),a=e.i(58129);let s="/api/v1";function i(){let{token:e}=(0,a.useAuth)(),[i,n]=(0,r.useState)([]),[l,o]=(0,r.useState)(!1),[d,c]=(0,r.useState)(0),h=(0,r.useRef)(null),g=async()=>{if(e)try{let t=await fetch(`${s}/notifications`,{headers:{Authorization:`Bearer ${e}`}});if(t.ok){let e=await t.json();n(e),c(e.filter(e=>!e.is_read).length)}}catch(e){console.error(e)}};(0,r.useEffect)(()=>{g();let e=setInterval(g,1e4);return()=>clearInterval(e)},[e]),(0,r.useEffect)(()=>{let e=e=>{h.current&&!h.current.contains(e.target)&&o(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let x=async t=>{try{await fetch(`${s}/notifications/${t}/read`,{method:"PATCH",headers:{Authorization:`Bearer ${e}`}}),n(e=>e.map(e=>e.id===t?{...e,is_read:!0}:e)),c(e=>Math.max(0,e-1))}catch(e){}},u=async()=>{try{await fetch(`${s}/notifications/read-all`,{method:"PATCH",headers:{Authorization:`Bearer ${e}`}}),n(e=>e.map(e=>({...e,is_read:!0}))),c(0)}catch(e){}},b=async(t,r)=>{t.stopPropagation();try{(await fetch(`${s}/notifications/${r}`,{method:"DELETE",headers:{Authorization:`Bearer ${e}`}})).ok&&n(e=>{let t=e.find(e=>e.id===r),a=e.filter(e=>e.id!==r);return t&&!t.is_read&&c(e=>Math.max(0,e-1)),a})}catch(e){console.error("Lá»—i xÃ³a thÃ´ng bÃ¡o",e)}};return(0,t.jsxs)("div",{className:"relative",ref:h,children:[(0,t.jsxs)("button",{onClick:()=>o(!l),className:"relative p-2 rounded-full hover:bg-gray-100 transition-colors",children:[(0,t.jsx)("span",{className:"text-xl",children:"ðŸ””"}),d>0&&(0,t.jsx)("span",{className:"absolute top-0 right-0 w-4 h-4 bg-red-500 text-white text-[10px] font-bold flex items-center justify-center rounded-full border border-white",children:d>9?"9+":d})]}),l&&(0,t.jsxs)("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-xl shadow-2xl border border-gray-200 z-50 animate-fade-in overflow-hidden origin-top-right",children:[(0,t.jsxs)("div",{className:"p-3 border-b border-gray-100 flex justify-between items-center bg-gray-50",children:[(0,t.jsx)("h3",{className:"font-bold text-sm text-gray-700",children:"ThÃ´ng bÃ¡o"}),d>0&&(0,t.jsx)("button",{onClick:u,className:"text-xs text-indigo-600 hover:underline font-medium",children:"Äá»c táº¥t cáº£"})]}),(0,t.jsx)("div",{className:"max-h-80 overflow-y-auto custom-scrollbar",children:0===i.length?(0,t.jsx)("div",{className:"p-8 text-center text-gray-400 text-xs",children:"KhÃ´ng cÃ³ thÃ´ng bÃ¡o má»›i"}):i.map(e=>{let r;return(0,t.jsxs)("div",{onClick:()=>!e.is_read&&x(e.id),className:`p-3 border-b border-gray-50 cursor-pointer transition-colors relative group ${e.is_read?"bg-white opacity-60 hover:bg-gray-50":"bg-blue-50/40 hover:bg-blue-50"}`,children:[(0,t.jsx)("button",{onClick:t=>b(t,e.id),className:"absolute top-2 right-2 w-5 h-5 flex items-center justify-center rounded-full text-gray-400 hover:bg-red-100 hover:text-red-600 opacity-0 group-hover:opacity-100 transition-all z-10",title:"XÃ³a thÃ´ng bÃ¡o",children:"Ã—"}),(0,t.jsxs)("div",{className:"flex justify-between items-start mb-1 pr-5",children:[(0,t.jsx)("span",{className:`text-[10px] font-bold px-1.5 py-0.5 rounded uppercase tracking-wider ${"OVERDUE"===e.type?"bg-red-100 text-red-600":"ASSIGN"===e.type?"bg-green-100 text-green-600":"bg-gray-100 text-gray-600"}`,children:e.type}),(0,t.jsx)("span",{className:"text-[10px] text-gray-400",children:(r=new Date(e.created_at),`${r.getHours()}:${r.getMinutes()} - ${r.getDate()}/${r.getMonth()+1}`)})]}),(0,t.jsx)("p",{className:`text-sm text-gray-800 mb-0.5 ${!e.is_read?"font-semibold":""}`,children:e.title}),(0,t.jsx)("p",{className:"text-xs text-gray-500 line-clamp-2 leading-snug",children:e.message})]},e.id)})})]})]})}e.s(["default",()=>i])},88776,e=>{"use strict";var t=e.i(56135);function r({name:e,size:r="md"}){let a=e?e.charAt(0).toUpperCase():"?",s=["bg-red-500","bg-orange-500","bg-amber-500","bg-green-500","bg-emerald-500","bg-teal-500","bg-cyan-500","bg-blue-500","bg-indigo-500","bg-violet-500","bg-purple-500","bg-fuchsia-500","bg-pink-500","bg-rose-500"],i=0;for(let t=0;t<(e||"").length;t++)i=e.charCodeAt(t)+((i<<5)-i);let n=s[Math.abs(i)%s.length];return(0,t.jsx)("div",{className:`${{sm:"w-6 h-6 text-xs",md:"w-8 h-8 text-sm",lg:"w-10 h-10 text-base",xl:"w-12 h-12 text-lg"}[r]} ${n} rounded-full flex items-center justify-center text-white font-bold shadow-sm border-2 border-white`,children:a})}e.s(["default",()=>r])}]);